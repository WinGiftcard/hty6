(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6073062f"],{"0869":function(t,e,n){"use strict";var a=n("bb1b"),o=n.n(a);o.a},1843:function(t,e,n){},"9aec":function(t,e,n){"use strict";var a=n("1843"),o=n.n(a);o.a},ab32:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container payment-page"},[n("payment-card",[n("v-form",{ref:"form",on:{submit:function(t){t.preventDefault()}},model:{value:t.isValid,callback:function(e){t.isValid=e},expression:"isValid"}},[n("div",{staticClass:"merchant-info"},[n("img",{staticClass:"merchant-logo",attrs:{src:this.pageInfo.merchantLogo,alt:"Logo"}}),n("span",{staticClass:"merchant-name"},[t._v(t._s(this.pageInfo.merchantName))])]),n("v-text-field",{staticClass:"inputNumber",staticStyle:{"margin-bottom":"10px"},attrs:{height:"48px",label:"Amount",placeholder:"Enter Amount",dense:"",required:"",oninput:"if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",type:"number",maxlength:"10",name:"amount",rules:[t.rules.required,t.rules.maxAmount,t.rules.minAmount],outlined:""},on:{input:t.handleAmountInput}}),n("v-text-field",{staticClass:"inputNumber",staticStyle:{"margin-top":"10px","margin-bottom":"-20px"},attrs:{label:"Payment Reference (Optional)",placeholder:"Enter Payment Reference",dense:"",required:"",oninput:"if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",type:"text",maxlength:"65",name:"customerReference",height:"48px",outlined:""},on:{input:t.handleCustomerInput}}),n("v-checkbox",{staticStyle:{margin:"0px"},attrs:{color:"#ffcb15",ripple:!1,"false-value":!1,"true-value":!0},on:{click:t.handleWalletAsContact},model:{value:t.useWalletAsContact,callback:function(e){t.useWalletAsContact=e},expression:"useWalletAsContact"}},[n("span",{staticClass:"use-wallet-text",attrs:{slot:"label"},slot:"label"},[t._v(" Use bKash wallet number as your contact number ")])]),t.useWalletAsContact?t._e():n("v-text-field",{staticClass:"inputNumber",attrs:{label:"Contact Number",placeholder:"Enter Contact Number",type:"number",height:"48px",name:"customerPhoneNumber",rules:[t.rules.required,t.rules.numberValidation],dense:"",required:"",outlined:""},on:{input:t.handleCustomerInput}})],1),n("br"),n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.hover;return[n("v-btn",{staticStyle:{"font-size":"20px","font-weight":"normal","margin-top":"-10px","border-radius":"8px"},attrs:{elevation:a?24:6,color:"primary",disabled:!t.isPaymentValid,height:"60px",width:"100%"},on:{click:t.confirmPayment}},[t._v(" Confirm Payment ")])]}}])}),n("button",{staticStyle:{display:"none"},attrs:{id:"bKash_button"}}),n("div",{staticStyle:{display:"flex","flex-direction":"column","margin-top":"15px"}},[n("div",{staticClass:"terms-text"},[t._v("By clicking on "),n("b",[t._v("Confirm Payment")]),t._v(" you are agreeing to the "),n("a",{staticStyle:{color:"#e2136e"},on:{click:t.goToTerms}},[t._v("terms & conditions")])])])],1)],1)},o=[],s=(n("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"card-border",attrs:{tile:"",width:"377px"}},[a("v-container",{staticStyle:{"padding-top":"25px","text-align":"center"}},[a("img",{staticClass:"payment-icon",attrs:{src:n("bf0b")}}),a("div",{staticStyle:{border:"1px solid #e2136e",width:"100%","box-shadow":"0px 1px 6px #888888"}}),a("v-col",[t._t("default")],2)],1)],1)}),i=[],r={name:"PaymentCard"},c=r,l=(n("9aec"),n("2877")),u=Object(l["a"])(c,s,i,!1,null,"29ffed84",null),m=u.exports,d=n("3148"),p=n("e239"),y={name:"DefaultPayment",components:{paymentCard:m},beforeRouteEnter:function(t,e,n){Object(p["a"])("https://scripts.pay.bka.sh/resources/js/library/jquery-3.5.1.min.js").then((function(){return Object(p["a"])("https://scripts.pay.bka.sh/versions/1.2.0-beta/checkout/bKash-checkout.js")})).then((function(){n()})).catch((function(){alert("Failed to load pgw scripts"),n(!1)}))},created:function(){var t=this;bKash.init({paymentMode:"checkout",paymentRequest:Object.assign({intent:"sale"},this.paymentBody),createRequest:function(e){t.$feedback.showLoading(),t.$cppClient.post("create-payment",e).then((function(e){var n=e.data;t.$feedback.hideLoading(),n&&null!=n.paymentID?(t.paymentId=n.paymentID,t.transactionId=n.transactionId,bKash.create().onSuccess(n)):bKash.create().onError()})).catch((function(e){var n=e.response;t.$logger.loggable(n).log(),t.$feedback.showFailed(n),bKash.create().onError(),t.$gtag.exception({description:JSON.stringify(n),fatal:!1}),t.$gtag.event("Payment creation failed",{event_category:"paymentlink",event_label:JSON.stringify(n)})}))},executeRequestOnAuthorization:function(){t.$cppClient.post("execute-payment",{transactionId:t.transactionId}).then((function(e){var n=e.data;t.$store.commit("clearPaymentBody"),n&&null!=n.paymentId&&t.paymentId===n.paymentId?(t.$store.commit("setSuccessfulPaymentInfo",n),t.$router.push({name:"payment-success"}),t.$gtag.event("made payment successfully",{event_category:"payment success"})):bKash.execute().onError()})).catch((function(e){var n=e.response;t.$refs.form.reset(),t.$logger.loggable(n).log(),t.$feedback.showFailed(n),bKash.create().onError(),t.$store.commit("clearPaymentBody"),t.$gtag.exception({description:JSON.stringify(n),fatal:!1}),t.$gtag.event("made payment failed",{event_category:"payment failed",event_label:JSON.stringify(n)})}))},onClose:function(){console.log("bkash pgw closed")}})},watch:{paymentOption:function(t){this.$store.commit("setPaymentBody",{key:"amount",value:""}),this.$store.commit("setPaymentBody",{key:"price",value:""}),this.$store.commit("setPaymentBody",{key:"packageName",value:""}),this.$store.commit("setPaymentBody",{key:"quantity",value:0}),this.$store.commit("setPaymentBody",{key:"trxType",value:"AMOUNT"}),"amount"===t&&(this.selectedPkg=null)}},computed:{pageInfo:function(){return this.$store.getters.getPageInfo},pageType:function(){return this.$store.getters.getTemplateType},paymentBody:function(){return this.$store.getters.getPaymentBody},termsAndConditionLink:function(){return"https://www.bkash.com/bn/terms-of-use-bkash-payment"},isPaymentValid:function(){return this.isValid}},data:function(){return{isValid:!1,amount:"",paymentOption:"amount",useWalletAsContact:!0,rules:{required:function(t){return!!t||"Value is required"},maxAmount:function(t){return t&&t.length<10||"Amount must be less than 10 digits"},minAmount:function(t){return t>0||"Amount must be greater than 0"},numberValidation:function(t){return t&&d["PHONE_NUMBER_RULE"].test(t)||"Please provide a valid mobile number"}},paymentId:"",transactionId:""}},methods:{confirmPayment:function(){this.paymentBody.amount&&(bKash.reconfigure({paymentRequest:Object.assign({intent:"sale"},this.paymentBody)}),$("#bKash_button").click(),console.log("payment clicked ",this.paymentBody.amount),this.$gtag.event("confirm payment - button clicked",{event_category:"CTA - Button",value:1}))},handleAmountInput:function(t){t=parseFloat(t),this.$store.commit("setPaymentBody",{key:"amount",value:t}),this.$store.commit("setPaymentBody",{key:"price",value:t}),this.$store.commit("setPaymentBody",{key:"packageName",value:"Customer Provided Amount"})},handleCustomerInput:function(t){var e=event.target.name;this.$store.commit("setPaymentBody",{key:e,value:t})},handleWalletAsContact:function(){this.$store.commit("setPaymentBody",{key:"useWalletAsContact",value:this.useWalletAsContact})},goToTerms:function(){window.open(this.termsAndConditionLink)}},mounted:function(){this.$gtag.event("landed on payment link entry page",{event_category:"visit"}),this.handleWalletAsContact()},destroyed:function(){this.$store.commit("setPaymentBody",{key:"amount",value:0}),this.$store.commit("setPaymentBody",{key:"price",value:0})}},h=y,f=(n("0869"),Object(l["a"])(h,a,o,!1,null,"4a7b4414",null));e["default"]=f.exports},bb1b:function(t,e,n){},bf0b:function(t,e,n){t.exports=n.p+"img/payment-logo.6db2fe6f.png"},e239:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("d3b7");function a(t){return new Promise((function(e,n){var a=document.createElement("script");a.setAttribute("src",t),document.head.appendChild(a),a.addEventListener("load",(function(){return e()})),a.addEventListener("error",(function(){return n()})),a.addEventListener("abort",(function(){return n()}))}))}}}]);
//# sourceMappingURL=chunk-6073062f.e8d3c7953e94e493fd8b.js.map