(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e82d468"],{"1d6b":function(e,t,n){},"51e7":function(e,t,n){},"5e68":function(e,t,n){"use strict";var a=n("1d6b"),s=n.n(a);s.a},6705:function(e,t,n){},9718:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container payment-page"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-7"},[n("v-form",{ref:"form",on:{submit:function(e){e.preventDefault()}},model:{value:e.isValid,callback:function(t){e.isValid=t},expression:"isValid"}},[n("span",{staticClass:"header-text"},[e._v("Payment Information")]),e.hasPackages?n("v-radio-group",{model:{value:e.paymentOption,callback:function(t){e.paymentOption=t},expression:"paymentOption"}},[n("div",{staticClass:"radio-group-layout "},[n("v-radio",{staticStyle:{"margin-bottom":"0px","margin-right":"10px"},attrs:{label:"Amount",value:"amount"}}),n("v-radio",{attrs:{label:"Package",value:"package"}})],1)]):e._e(),e.hasPackages&&"package"===e.paymentOption?n("div",{staticClass:"row margin-div"},[n("packages",{attrs:{packages:e.pageInfo.packages,selectedPackage:e.selectedPkg},on:{packageSelect:e.selectPackage}})],1):n("v-text-field",{staticClass:"inputNumber",staticStyle:{"margin-bottom":"10px","margin-top":"20px",width:"50%"},attrs:{label:"Enter Amount",placeholder:"Amount",dense:"",required:"",oninput:"if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",type:"number",maxlength:"10",name:"amount",rules:[e.rules.required,e.rules.maxAmount,e.rules.minAmount],outlined:""},on:{input:e.handleAmountInput}}),n("v-checkbox",{attrs:{color:"#ffcb15",ripple:!1,"false-value":!1,"true-value":!0},on:{click:e.handleWalletAsContact},model:{value:e.useWalletAsContact,callback:function(t){e.useWalletAsContact=t},expression:"useWalletAsContact"}},[n("span",{staticStyle:{"font-size":"13px"},attrs:{slot:"label"},slot:"label"},[e._v(" Use bKash wallet number as your contact number ")])]),e.useWalletAsContact?e._e():n("v-text-field",{staticClass:"inputNumber",staticStyle:{width:"50%"},attrs:{label:"Contact Number",placeholder:"Enter Contact Number",type:"number",name:"customerPhoneNumber",rules:[e.rules.required,e.rules.numberValidation],dense:"",required:"",outlined:""},on:{input:e.handleCustomerInput}}),e.hasCustomerInfoSelected?n("customer-info",{staticStyle:{"margin-top":"20px"},attrs:{pageInfo:e.pageInfo}}):e._e()],1)],1),n("payment-summary",{staticClass:"col-md-5",attrs:{"is-valid":e.isPaymentValid,paymentBody:e.paymentBody,termsAndConditionLink:e.termsAndConditionLink,pageType:e.pageType},on:{confirmPayment:e.confirmPayment}})],1)])},s=[],i=(n("4de4"),n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("hr"),n("span",{staticClass:"header-text"},[e._v(" Customer Information ")]),e._l(e.customerFields,(function(t,a){return n("div",{key:a},["customerBillMonth"===t.name?n("div",{staticClass:"customer-datepicker"},["customerBillMonth"===t.name?n("v-menu",{ref:"dateMenu",refInFor:!0,attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{value:e.formattedDate,label:"Month",id:"date-picker","append-icon":"mdi-calendar",outlined:"",dense:"",readonly:"",required:"",rules:e.dateSelectionRules},on:{"click:append":e.toggleCalenderMenu}},"v-text-field",s,!1),a))]}}],null,!0),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[n("v-date-picker",{ref:"datePicker",refInFor:!0,staticClass:"v-date-picker-table",attrs:{scrollable:"","no-title":!0,color:"#e2136e"},on:{change:function(n){return e.setDate(t.name)},input:function(t){e.dateMenu=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1):e._e()],1):n("div",["customerName"===t.name?n("v-text-field",{directives:[{name:"show",rawName:"v-show",value:!(e.isHideable&&"customerReference"!==t.name),expression:"!(isHideable && field.name !=='customerReference')"}],staticClass:"inputNumber",staticStyle:{"margin-top":"20px",width:"50%"},attrs:{id:t.name,label:t.label,placeholder:t.placeholder,required:e.pageType,dense:"",oninput:"if (this.value.length > this.maxLength) this.value = this.value.slice(0, this.maxLength);",maxlength:"15",rules:e.pageType?e.nameRules:[],value:e.$store.getters.getPaymentBody[t.name],outlined:""},on:{input:function(n){return e.setFieldValue(t.name)}}}):n("v-text-field",{directives:[{name:"show",rawName:"v-show",value:!(e.isHideable&&"customerReference"!==t.name),expression:"!(isHideable && field.name !=='customerReference')"}],staticClass:"inputNumber",staticStyle:{"margin-top":"20px",width:"50%"},attrs:{id:t.name,label:t.label,placeholder:t.placeholder,rules:e.pageType?"customerEmail"===t.name?e.emailRules:e.inputRules:[],required:e.pageType,dense:"",value:e.$store.getters.getPaymentBody[t.name],outlined:""},on:{input:function(n){return e.setFieldValue(t.name)}}})],1)])}))],2)}),o=[],r=(n("d81d"),n("3148")),c=n("c1df"),u=n.n(c),l={name:"CustomerInfo",props:["pageInfo"],data:function(){return{date:"",dateMenu:!1,inputRules:[function(e){return!!e||"Value is required"}],dateSelectionRules:[function(e){return"dd/mm/yyyy"!==e||"Date is required"}],emailRules:[function(e){return!!e||"E-mail is required"},function(e){return r["EMAIL_RULE"].test(e)||"E-mail must be valid"}],nameRules:[function(e){return!!e||"Name is required"},function(e){return e&&e.length<=30||"Name can not be more than 30 digits"}]}},computed:{customerFields:function(){var e=this;return this.pageInfo.fields.filter((function(e){return e.selected})).map((function(t){return t.name=e.getFieldName(t.name),t}))},formattedDate:function(){return this.date?u()(this.date).format("DD/MM/YYYY"):"dd/mm/yyyy"},pageType:function(){return"home"===this.$store.getters.getTemplateType},isHideable:function(){return"payment"===this.$store.getters.getTemplateType}},methods:{getFieldName:function(e){switch(e){case"name":case"customerName":return"customerName";case"email":case"customerEmail":return"customerEmail";case"mailingAddress":case"customerAddress":return"customerAddress";case"reference":case"customerReference":return"customerReference";case"membershipID":case"customerMembershipId":return"customerMembershipId";case"billMonth":case"customerBillMonth":return"customerBillMonth";default:throw new Error("Invalid field name")}},toggleCalenderMenu:function(){this.dateMenu=!this.dateMenu},setFieldValue:function(e){this.$store.commit("setPaymentBody",{key:e,value:document.getElementById(e).value})},setDate:function(){this.$store.commit("setPaymentBody",{key:"customerBillMonth",value:this.date})}}},m=l,d=(n("eee1"),n("2877")),p=Object(d["a"])(m,i,o,!1,null,"b1c0124c",null),y=p.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-10 payment-summary"},[n("div",{staticClass:"dotted-border"},[n("div",{staticClass:"header-text"},[e._v(" Payment Summary ")]),n("table",[n("tr",{directives:[{name:"show",rawName:"v-show",value:!e.isHideable,expression:"!isHideable"}]},[n("td",[e._v("Payment Amount")]),n("td",[n("b",[e._v("৳ "+e._s(e.displayAmount))])])]),n("tr",{directives:[{name:"show",rawName:"v-show",value:!e.isHideable,expression:"!isHideable"}],staticStyle:{"border-top":"2px solid #eeeeee"}},[n("td",[e._v("Subtotal")]),n("td",[n("b",[e._v("৳ "+e._s(e.displayAmount))])])]),n("tr",{directives:[{name:"show",rawName:"v-show",value:!e.isHideable,expression:"!isHideable"}]},[n("td",[e._v("Fees")]),e._m(0)]),n("tr",{staticStyle:{"border-top":"2px solid #eeeeee"}},[e._m(1),n("td",[n("b",[e._v("৳ "+e._s(e.displayAmount))])])])]),n("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.hover;return[n("v-btn",{staticStyle:{"font-size":"20px","margin-top":"15px"},attrs:{elevation:a?24:6,color:"primary",disabled:!e.isValid,height:"60px",width:"100%"},on:{click:function(t){return e.$emit("confirmPayment")}}},[e._v(" Confirm Payment ")])]}}])}),n("div",{staticStyle:{display:"flex","flex-direction":"column","margin-top":"15px"}},[n("div",{staticClass:"terms-text"},[e._v("By clicking on "),n("b",[e._v("Confirm Payment")]),e._v(" you are agreeing to the "),n("a",{staticStyle:{color:"#e2136e"},on:{click:e.goToTerms}},[e._v("terms & conditions")])])]),n("button",{staticStyle:{display:"none"},attrs:{id:"bKash_button"}})],1)])])])},h=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",[n("b",[e._v("৳ 0.00")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",[n("b",[e._v("Total")])])}],g=(n("b680"),{name:"PaymentSummary",props:["isValid","paymentBody","termsAndConditionLink","pageType"],computed:{isHideable:function(){return"payment"===this.pageType},amount:function(){if(this.paymentBody)return this.paymentBody.amount},displayAmount:function(){var e=this.amount||0;return parseFloat(e).toFixed(2)}},methods:{goToTerms:function(){window.open(this.termsAndConditionLink)}}}),v=g,b=(n("f9d4"),Object(d["a"])(v,f,h,!1,null,"b13719fe",null)),k=b.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"packages"},e._l(e.packages,(function(t,a){return n("v-card",{key:a,staticClass:"package",class:e.isSelectedPackage(t)?"selected-pkg":"",on:{click:function(t){return e.$emit("packageSelect",a)}}},[n("div",{staticClass:"package-title"},[e._v(e._s(t.name))]),n("div",{staticClass:"package-amount",class:{"large-amount":e.isLargeAmount(t.price),"medium-amount":e.isMediumAmount(t.price)}},[e._v(" ৳ "+e._s(t.price)+" ")]),n("div",{staticClass:"package-des",domProps:{innerHTML:e._s(t.description)}})])})),1)},_=[],C={props:{packages:Array,selectedPackage:Object},methods:{isSelectedPackage:function(e){return this.selectedPackage===e},isMediumAmount:function(e){return e.length<9&&e.length>4},isLargeAmount:function(e){return e.length>=9}}},x=C,A=(n("d233"),Object(d["a"])(x,P,_,!1,null,"13cb9c24",null)),w=A.exports,I=n("e239"),B={name:"PaymentInfo",components:{customerInfo:y,paymentSummary:k,Packages:w},beforeRouteEnter:function(e,t,n){Object(I["a"])("https://scripts.pay.bka.sh/resources/js/library/jquery-3.5.1.min.js").then((function(){return Object(I["a"])("https://scripts.pay.bka.sh/versions/1.2.0-beta/checkout/bKash-checkout.js")})).then((function(){n()})).catch((function(){alert("Failed to load pgw scripts"),n(!1)}))},created:function(){var e=this;this.$feedback.hideLoading(),bKash.init({paymentMode:"checkout",paymentRequest:Object.assign({intent:"sale"},this.paymentBody),createRequest:function(t){e.$feedback.showLoading(),e.$cppClient.post("create-payment",t).then((function(t){var n=t.data;e.$feedback.hideLoading(),n&&null!=n.paymentID?(e.paymentId=n.paymentID,e.transactionId=n.transactionId,bKash.create().onSuccess(n)):bKash.create().onError()})).catch((function(t){var n=t.response;e.$logger.loggable(n).log(),e.$feedback.showFailed(n),bKash.create().onError(),e.$gtag.exception({description:JSON.stringify(n),fatal:!1}),e.$gtag.event("Payment creation failed",{event_category:"paymentlink",event_label:JSON.stringify(n)})}))},executeRequestOnAuthorization:function(){e.$cppClient.post("execute-payment",{transactionId:e.transactionId}).then((function(t){var n=t.data;e.$store.commit("clearPaymentBody"),n&&null!=n.paymentId&&e.paymentId===n.paymentId?(e.$store.commit("setSuccessfulPaymentInfo",n),e.$router.push({name:"payment-success"}),e.$gtag.event("made payment successfully",{event_category:"payment success"})):bKash.execute().onError()})).catch((function(t){var n=t.response;e.$refs.form.reset(),e.$logger.loggable(n).log(),e.$feedback.showFailed(n),bKash.create().onError(),e.$store.commit("clearPaymentBody"),e.$gtag.exception({description:JSON.stringify(n),fatal:!1}),e.$gtag.event("made payment failed",{event_category:"payment failed",event_label:JSON.stringify(n)})}))},onClose:function(){console.log("bkash pgw closed")}})},watch:{paymentOption:function(e){this.$store.commit("setPaymentBody",{key:"amount",value:""}),this.$store.commit("setPaymentBody",{key:"price",value:""}),this.$store.commit("setPaymentBody",{key:"packageName",value:""}),this.$store.commit("setPaymentBody",{key:"quantity",value:0}),this.$store.commit("setPaymentBody",{key:"trxType",value:"AMOUNT"}),"amount"===e&&(this.selectedPkg=null)}},computed:{pageInfo:function(){return this.$store.getters.getPageInfo},pageType:function(){return this.$store.getters.getTemplateType},paymentBody:function(){return this.$store.getters.getPaymentBody},termsAndConditionLink:function(){return"https://www.bkash.com/bn/terms-of-use-bkash-payment"},hasCustomerInfoSelected:function(){return!!this.pageInfo.fields&&this.pageInfo.fields.filter((function(e){return e.selected})).length},hasPackages:function(){return!!this.pageInfo.packages&&this.pageInfo.packages.length},isPaymentValid:function(){return"amount"===this.paymentOption?this.isValid:this.isValid&&this.selectedPkg}},data:function(){return{isValid:!1,amount:"",paymentOption:"amount",selectedPkg:null,useWalletAsContact:!0,rules:{required:function(e){return!!e||"Value is required"},maxAmount:function(e){return e&&e.length<10||"Amount must be less than 10 digits"},minAmount:function(e){return e>0||"Amount must be greater than 0"},numberValidation:function(e){return e&&r["PHONE_NUMBER_RULE"].test(e)||"Please provide a valid mobile number"}},paymentId:"",transactionId:""}},methods:{confirmPayment:function(){this.paymentBody.amount&&(bKash.reconfigure({paymentRequest:Object.assign({intent:"sale"},this.paymentBody)}),$("#bKash_button").click(),this.$gtag.event("confirm payment - button clicked",{event_category:"CTA - Button",value:1}))},selectPackage:function(e){this.selectedPkg=this.pageInfo.packages[e];var t=parseFloat(this.selectedPkg.price),n=this.selectedPkg.name;this.$store.commit("setPaymentBody",{key:"amount",value:t}),this.$store.commit("setPaymentBody",{key:"price",value:t}),this.$store.commit("setPaymentBody",{key:"packageName",value:n}),this.$store.commit("setPaymentBody",{key:"quantity",value:1}),this.$store.commit("setPaymentBody",{key:"trxType",value:"PACKAGE"})},handleAmountInput:function(e){e=parseFloat(e),this.$store.commit("setPaymentBody",{key:"amount",value:e}),this.$store.commit("setPaymentBody",{key:"price",value:e}),this.$store.commit("setPaymentBody",{key:"packageName",value:"Customer Provided Amount"})},handleCustomerInput:function(e){var t=event.target.name;this.$store.commit("setPaymentBody",{key:t,value:e})},handleWalletAsContact:function(){this.$store.commit("setPaymentBody",{key:"useWalletAsContact",value:this.useWalletAsContact})}},mounted:function(){this.$gtag.event("landed on payment link entry page",{event_category:"visit"}),this.handleWalletAsContact()},destroyed:function(){this.$store.commit("setPaymentBody",{key:"amount",value:0}),this.$store.commit("setPaymentBody",{key:"price",value:0})}},S=B,E=(n("5e68"),Object(d["a"])(S,a,s,!1,null,"793076a8",null));t["default"]=E.exports},a61a:function(e,t,n){},d233:function(e,t,n){"use strict";var a=n("6705"),s=n.n(a);s.a},e239:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("d3b7");function a(e){return new Promise((function(t,n){var a=document.createElement("script");a.setAttribute("src",e),document.head.appendChild(a),a.addEventListener("load",(function(){return t()})),a.addEventListener("error",(function(){return n()})),a.addEventListener("abort",(function(){return n()}))}))}},eee1:function(e,t,n){"use strict";var a=n("51e7"),s=n.n(a);s.a},f9d4:function(e,t,n){"use strict";var a=n("a61a"),s=n.n(a);s.a}}]);
//# sourceMappingURL=chunk-5e82d468.e8d3c7953e94e493fd8b.js.map